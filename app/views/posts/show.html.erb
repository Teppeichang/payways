<%= render partial: "header" %>

<div class="post-area">
  <div class="post-left-content">
    <% unless @post.image.blank?%>
      <%= image_tag @post.image.variant(resize:'250x250') %>
    <% else %>
      <p>No Image</p>
    <% end %>
  </div>
  <div class="post-right-content">
    <h2 class="shop-name"><%= @post.shop_name %></h2>
    <%= @post.explain %>
    <div class="post-right-bottom-content">
      <% if user_signed_in? && current_user.id == @post.user_id %>
        <i class="far fa-edit"></i>
        <%= link_to "編集", edit_post_path(@post.id), class:"post-edit" %>
        <i class="fas fa-trash"></i>
        <%= link_to "削除", post_path(@post.id), method: :delete, class:"post-delete" %>
      <% end %>
    </div>
  </div>
</div>

<div class="comment-index">
  <p>
    <i class="fas fa-comment-dots"></i>
    コメント一覧
  </p>
  <% if @comments %>
    <% @comments.each do |comment|%>
      <%= comment.text %>
    <% end %>
  <% end %>
</div>

<div class="comment-area">
  <% if user_signed_in? %>
    <%= form_with(model: [@post, @comment], local: true) do |form| %>
      <%= form.text_area :text, placeholder: "コメントを記入してください" %>
      <%= form.submit "コメントする" %>
    <% end %>
  <% else %>
    <p>
      <i class="fas fa-exclamation-circle"></i>
      コメントの投稿には新規登録/ログインが必要です
      </p>
  <% end %>
</div>
